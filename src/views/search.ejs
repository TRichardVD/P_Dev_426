<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Page</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <nav>
          <a href="/" id="logo"
            ><img src="./resources/images/logo.png" alt="" style="width: 50px"
          /></a>
          <div class="nav-pages">
            <a href="/">Accueil</a>
            <a href="/api/site">Monuments</a>
          </div>
          <div class="nav-login-register">
            <a href="" class="cta">Se connecter</a>
            <a href="" id="register">Créer un compte</a>
          </div>
        </nav>
      </header>
    <div class="search-container"></div>
    <form action="/api/site" method="GET">
        <input type="text" name="query" placeholder="Chercher" value="<%= query || "" %>">
        <button type="submit">Rechercher</button>
        <input type="text" name="country" value="<%= country || "" %>" placeholder="Pays">
        <label for="sortField">Trier par:</label>
        <select name="sortField" id="sortField" value="<%= sortField || "" %>">
            <option value="">Sélectionnez un champ</option>
            <option value="pertinence" <%= sortField === "pertinence" ? "selected" : "" %>>Pertinence</option>
            <option value="alphabetique" <%= sortField === "alphabetique" ? "selected" : "" %> id="alphabetique">Alphabétique</option>
        </select>
        <select name="sortOrder" id="sortOrder" value="<%= sortOrder || "" %>">
            <option value="asc" <%= sortOrder === "asc" ? "selected" : "" %>>Ordre croissant</option>
            <option value="desc" <%= sortOrder === "desc" ? "selected" : "" %>>Ordre décroissant</option>
        </select>
    </form>
    <button id="reset">Réinitialiser</button>
    
        <div class="search-results"></div>
            <% if (results && results.length > 0) { %>
                <h2>Résultats de recherche pour "<%= query %>":</h2>
                <ul>
                    <% results.forEach(result => { %>
                        <li>
                            <strong><%= result.name %></strong>: <%= result.description %>
                        </li>
                    <% }) %>
                </ul>
            <% } else if (query) { %>
                <p>Aucun résultat trouvé pour "<%= query %>".</p>
            <% } %>
        </div>
    </div>
    <script>
        const resetButton = document.getElementById('reset');
        resetButton.addEventListener('click', () => {
            const searchInput = document.querySelector('input[name="query"]');
            const countryInput = document.querySelector('input[name="country"]');
            const sortFieldSelect = document.getElementById('sortField');
            const sortOrderSelect = document.getElementById('sortOrder');

            searchInput.value = '';
            countryInput.value = '';
            sortFieldSelect.selectedIndex = 0;
            sortOrderSelect.selectedIndex = 0;
        });
    </script>
</body>
</html>
